---
import Heading from "@components/Heading.astro";
import BaseLayout from "@layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const projects = await getCollection("work");
---

<BaseLayout title='Work'>
  <Heading title='Projects' subtitle="Things I've worked on" />
  <p class='text-center prose-a:link'>
    This page only features some of my projects, but you can find all of them on
    <a href='https://github.com/nevthereal' target='_blank'>GitHub</a> or on my
    <a href='https://links.nevillebrem.com' target='_blank'>linktree</a>.
  </p>
  <div
    class='my-16 flex grid-cols-2 flex-col gap-8 xl:grid max-w-4xl md:mx-auto mx-2'
  >
    {
      projects.map((project) => {
        console.log(project);
        return (
          <div class='bg-base-200 rounded-box flex flex-col justify-between p-8 text-left'>
            <div>
              <h1 class='font-bold text-3xl'>{project.data.name}</h1>
              <hr class='my-4 border-t border-t-base-content/50' />
              <p class='font-bold text-xl'>Description</p>
              <p>{project.data.desc}</p>
              <hr class='my-4 border-t border-t-base-content/50' />
              <p class='font-bold text-xl'>Technologies</p>
              <ul class='disc-list'>
                {project.data.tech.map((tech) => {
                  return <li>{tech}</li>;
                })}
              </ul>
              <hr class='my-4 border-t border-t-base-content/50' />
            </div>
            <div>
              <div class='flex'>
                <a
                  href={project.data.link}
                  target='_blank'
                  aria-label='Project Link'
                >
                  <button class='btn btn-square btn-ghost duration-200 ease-in-out hover:text-primary'>
                    <i class='fa-solid fa-globe text-2xl' />
                  </button>
                </a>
                {project.data.ghLink != null && (
                  <a
                    href={project.data.ghLink}
                    target='_blank'
                    aria-label='GitHub'
                  >
                    <button
                      class='btn btn-square duration-200 ease-in-out hover:text-purple-500 btn-ghost'
                      disabled={!project.data.ghLink === undefined}
                    >
                      <i class='fa-brands fa-github text-2xl' />
                    </button>
                  </a>
                )}
              </div>
            </div>
          </div>
        );
      })
    }
  </div>
</BaseLayout>
